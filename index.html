<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Lovingly Framed</title>

<style>
:root{
  --text:#6a3d57;
  --stroke:rgba(0,0,0,.08);
  --radius:16px;
  --shadow:0 6px 14px rgba(0,0,0,.18);
  --imgBorder: rgba(200,200,200,.35);
  --topbar-h:78px;
}

*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;}

body{
  font-family:system-ui,-apple-system,Tahoma,Arial;
  background:#fff7fb;
  color:var(--text);
  overflow-x:hidden;
  padding-top:calc(env(safe-area-inset-top) + var(--topbar-h) + 12px);
}

body.catalog-mode{
  background:#000;
  color:#fff;
}

.container{
  max-width:560px;
  margin:0 auto;
  padding:12px;
}

.view-hidden{display:none!important;}

/* ÿßŸÑÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿπŸÑŸàŸä */
.top-bar{
  position:fixed;
  top:env(safe-area-inset-top);
  left:50%;
  transform:translateX(-50%);
  width:min(560px, calc(100% - 24px));
  z-index:1000;
  background:#fff;
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:10px 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.back-btn{
  display:none;
  border:none;
  background:#111;
  color:#fff;
  border-radius:12px;
  padding:10px 12px;
  font-weight:900;
  cursor:pointer;
}

.brand{
  flex:1;
  text-align:center;
}
.brand .made{font-size:16px;font-weight:900;}
.brand .handle{font-size:14px;font-weight:800;direction:ltr;opacity:.9;}

/* ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© */
.home-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.home-card{
  background:#fff;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
  cursor:pointer;
}
.home-card img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* ÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ± */
.feed{
  display:flex;
  flex-direction:column;
  gap:16px;
}
.post{
  background:#0b0b0b;
  border-radius:var(--radius);
  overflow:hidden;
  border:2px solid var(--imgBorder);
  box-shadow:0 12px 22px rgba(0,0,0,.4);
}
.post .ph{
  background:#111;
  width:100%;
  aspect-ratio:9/16;
}
.post img{
  width:100%;
  display:block;
  background:#111;
}
.end-note{
  text-align:center;
  color:rgba(255,255,255,.75);
  font-weight:900;
  padding:22px 10px 32px;
}
</style>
</head>

<body>
<div class="container">

  <div class="top-bar">
    <button id="backBtn" class="back-btn" onclick="goBack()">‚Üê ÿ±ÿ¨Ÿàÿπ</button>
    <div class="brand">
      <div class="made">ÿµŸèŸÜÿπ ÿ®ÿ≠ÿ® ü§ç</div>
      <div class="handle">lovingly.framed</div>
    </div>
    <div style="width:70px;"></div>
  </div>

  <section id="homeView">
    <div class="home-grid">
      <div class="home-card" onclick="openCatalog('bridal')">
        <img src="images/bridal/1.jpg">
      </div>
      <div class="home-card" onclick="openCatalog('newborn')">
        <img src="images/newborn/1.jpg">
      </div>
      <div class="home-card" onclick="openCatalog('balloons')">
        <img src="images/balloons/1.jpg">
      </div>
      <div class="home-card" onclick="openCatalog('grad')">
        <img src="images/grad/1.jpg">
      </div>
    </div>
  </section>

  <section id="catalogView" class="view-hidden">
    <div class="feed" id="feed"></div>
  </section>

</div>

<script>
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
const BRIDAL_COUNT   = 7;
const NEWBORN_COUNT  = 23;
const BALLOONS_COUNT = 0;
const GRAD_COUNT     = 6;
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
const IMAGE_ROOT = "images";
const EXT = "jpg";
const START_INDEX = 2;

const LIMITS = {
  bridal: BRIDAL_COUNT,
  newborn: NEWBORN_COUNT,
  balloons: BALLOONS_COUNT,
  grad: GRAD_COUNT
};

const homeView = document.getElementById("homeView");
const catalogView = document.getElementById("catalogView");
const feed = document.getElementById("feed");
const backBtn = document.getElementById("backBtn");

let io=null;
function ensureObserver(){
  if(io) return;
  io=new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(!e.isIntersecting) return;
      const img=e.target;
      img.src=img.dataset.src;
      img.removeAttribute("data-src");
      io.unobserve(img);
    });
  },{rootMargin:"1200px"});
}

function makePost(url){
  const d=document.createElement("div");
  d.className="post";
  d.innerHTML=`<div class="ph"></div><img data-src="${url}" loading="lazy">`;
  const img=d.querySelector("img");
  img.onload=()=>d.querySelector(".ph")?.remove();
  img.onerror=()=>d.remove();
  ensureObserver(); io.observe(img);
  return d;
}

function renderFeed(cat){
  feed.innerHTML="";
  for(let i=START_INDEX;i<=LIMITS[cat];i++){
    feed.appendChild(makePost(`${IMAGE_ROOT}/${cat}/${i}.${EXT}`));
  }
  const end=document.createElement("div");
  end.className="end-note";
  end.textContent="ŸÜŸáÿßŸäÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ";
  feed.appendChild(end);
  window.scrollTo(0,0);
}

function openCatalog(cat){
  document.body.classList.add("catalog-mode");
  homeView.classList.add("view-hidden");
  catalogView.classList.remove("view-hidden");
  backBtn.style.display="inline-flex";
  renderFeed(cat);
}

function goBack(){
  document.body.classList.remove("catalog-mode");
  catalogView.classList.add("view-hidden");
  homeView.classList.remove("view-hidden");
  backBtn.style.display="none";
  window.scrollTo(0,0);
}
</script>
</body>
</html>
